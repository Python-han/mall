"use strict";(self["webpackChunkbaykeshop"]=self["webpackChunkbaykeshop"]||[]).push([[4831],{7017:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var o=t(6252);function a(e,l,t,a,s,i){const d=(0,o.up)("sc-upload"),u=(0,o.up)("el-form-item"),r=(0,o.up)("el-input"),m=(0,o.up)("el-input-number"),n=(0,o.up)("el-switch"),p=(0,o.up)("el-form"),f=(0,o.up)("el-button"),h=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.j4)(h,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>s.visible=e),width:500,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed"))},{footer:(0,o.w5)((()=>[(0,o.Wm)(f,{onClick:l[4]||(l[4]=e=>s.visible=!1)},{default:(0,o.w5)((()=>[(0,o.Uk)("取 消")])),_:1}),"show"!=s.mode?((0,o.wg)(),(0,o.j4)(f,{key:0,type:"primary",loading:s.isSaveing,onClick:l[5]||(l[5]=e=>i.submit())},{default:(0,o.w5)((()=>[(0,o.Uk)("保 存")])),_:1},8,["loading"])):(0,o.kq)("",!0)])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{model:s.form,rules:s.rules,disabled:"show"==s.mode,ref:"dialogForm","label-width":"100px"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"分类图标",prop:"logo"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{autoUpload:!1,ref:"uploadRef",modelValue:s.form.logo,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.logo=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"品牌名称",prop:"name"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:s.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.name=e),placeholder:"请输入品牌名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"排序",prop:"sort"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{modelValue:s.form.sort,"onUpdate:modelValue":l[2]||(l[2]=e=>s.form.sort=e),"controls-position":"right",min:1,style:{width:"100%"}},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"是否有效",prop:"status"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:s.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>s.form.status=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var s={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增",edit:"编辑",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",name:"",sort:1,status:!0,logo:null},rules:{sort:[{required:!0,message:"请输入排序",trigger:"change"}],name:[{required:!0,message:"请输入部门名称"}]},groups:[],groupsProps:{label:"name",value:"id",emitPath:!1,checkStrictly:!0}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(e){this.isSaveing=!0;const e=new FormData;this.$refs.uploadRef.file&&e.append("logo",this.$refs.uploadRef.file.raw);for(const l in this.form)e.append(l,this.form[l]);var l=await this.getSubmitApi(this.mode,e);this.isSaveing=!1,200==l.status||201==l.status?(this.$emit("success",l.data,this.mode),this.visible=!1,this.$message.success("操作成功")):this.$alert(l.message,"提示",{type:"error"})}}))},setData(e){Object.assign(this.form,e)},getSubmitApi(e,l){return"null"!=l.get("logo")&&"undefined"!=l.get("logo")||l.delete("logo"),"edit"==e?this.$API.shop.brand.update.put(l.get("id"),l):"add"==e?this.$API.shop.brand.create.post(l):void 0}}},i=t(3744);const d=(0,i.Z)(s,[["render",a]]);var u=d}}]);