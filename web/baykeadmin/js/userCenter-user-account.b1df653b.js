"use strict";(self["webpackChunkbaykeshop"]=self["webpackChunkbaykeshop"]||[]).push([[8782],{6290:function(a,e,l){l.r(e),l.d(e,{default:function(){return s}});var t=l(6252);const o=(0,t._)("div",{class:"el-form-item-msg"},"账号信息用于登录，系统不允许修改",-1);function u(a,e,l,u,m,d){const r=(0,t.up)("el-input"),s=(0,t.up)("el-form-item"),n=(0,t.up)("sc-upload"),i=(0,t.up)("el-option"),f=(0,t.up)("el-select"),p=(0,t.up)("el-button"),h=(0,t.up)("el-form"),b=(0,t.up)("el-card"),c=(0,t.Q2)("loading");return(0,t.wg)(),(0,t.j4)(b,{shadow:"never",header:"个人信息"},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(h,{ref:"form",model:m.form,"label-width":"120px",style:{"margin-top":"20px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{label:"账号"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:m.form.username,"onUpdate:modelValue":e[0]||(e[0]=a=>m.form.username=a),disabled:""},null,8,["modelValue"]),o])),_:1}),(0,t.Wm)(s,{label:"头像"},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{autoUpload:!1,ref:"uploadRef",modelValue:m.form.avatar,"onUpdate:modelValue":e[1]||(e[1]=a=>m.form.avatar=a),round:"",icon:"el-icon-avatar"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(s,{label:"姓名"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:m.form.name,"onUpdate:modelValue":e[2]||(e[2]=a=>m.form.name=a)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(s,{label:"性别"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:m.form.sex,"onUpdate:modelValue":e[3]||(e[3]=a=>m.form.sex=a),placeholder:"请选择"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(m.options,(a=>((0,t.wg)(),(0,t.j4)(i,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(s,{label:"个性签名"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:m.form.about,"onUpdate:modelValue":e[4]||(e[4]=a=>m.form.about=a),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(s,null,{default:(0,t.w5)((()=>[(0,t.Wm)(p,{type:"primary",onClick:d.onSubmit},{default:(0,t.w5)((()=>[(0,t.Uk)("保存")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])),[[c,m.loading]])])),_:1})}var m={data(){return{form:{id:"",username:"",name:"",sex:"1",about:"",avatar:""},options:[{label:"保密",value:0},{label:"男",value:1},{label:"女",value:2}],loading:!1}},created(){this.loading=!0,this.$API.badmin.user.get().then((a=>{200==a.status&&(this.form.id=a.data.id,this.form.username=a.data.owner.username,this.form.name=a.data.name,this.form.sex=a.data.sex,this.form.about=a.data.about,this.form.avatar=a.data.avatar?a.data.avatar:"img/avatar2.gif",this.loading=!1)}))},methods:{onSubmit(){const a=new FormData;a.append("name",this.form.name),a.append("sex",this.form.sex),a.append("about",this.form.about),"ready"==this.$refs.uploadRef.file.status&&a.append("avatar",this.$refs.uploadRef.file.raw),this.loading=!0,this.$API.badmin.users.partial_update.patch(this.form.id,a).then((a=>{200==a.status&&(this.form.id=a.data.id,this.form.username=a.data.owner.username,this.form.name=a.data.name,this.form.sex=a.data.sex,this.form.about=a.data.about,this.form.avatar=a.data.avatar,this.loading=!1,this.$message.success("修改成功"))}))}}},d=l(3744);const r=(0,d.Z)(m,[["render",u]]);var s=r}}]);