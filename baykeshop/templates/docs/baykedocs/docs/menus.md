# django后端自定义菜单

django原本的菜单显示模式为一级菜单为APP的名称，二级菜单为模型名称，
不能人为的手动去控制和调整菜单的归类以及显示，只能通过不停的新增APP去达到归类菜单的目的。

基于此，本项目扩展了该功能，新增了两个模型`BaykeMenu`和`BaykePermission`,他们两个的关系是一对多，`BaykePermission`模型和django默认的权限模型`Permission`又构成了一对一关系，这其实变相的就是扩展了django的默认权限。此后，我们设置菜单只需要改动这两个表的关联关系就可以实现动态调整的目的，他同时是和django的权限兼容的，原来的设置权限和组的方式方法都不用做任何改变！

## 开启自定义菜单功能
> `ADMIN_MENUS`配置设为True则开启自定义菜单（默认开启），相反则显示admin默认的菜单显示模式，菜单与权限强关联，默认超管拥有所有权限！

```python
# bayke/settings.py

BAYKE_SHOP = {
    "ADMIN_MENUS": True
}
```
## 增加菜单
1、默认项目已经设置好了基本的菜单显示，如下图所示：
![新增菜单](/img/1.png)
2、一级菜单自己定义，二级菜单则需要关联模型的view操作权限，只要当前登录的后台用户拥有该权限则会正常显示在菜单中，
二级菜单显示的名称是模型的Meta元类中的verbose_name，所以在创建模型的时候就要设置该值！
![新增菜单](/img/2.png)
3、编辑菜单及改变二级菜单的归属
如下图所示，如果我们要改变商品大类下的二级分类的归属，只需要点击旁边的**笔形按钮**，
即可弹出修改界面，该操作需要用户拥有`BaykeMenu`模型的change权限。
![编辑菜单](/img/3.png)
